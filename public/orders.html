<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>平台订单与收益统计</title>
  <link rel="stylesheet" href="main.css">
  <script defer>
    async function loadOrders() {
      const res = await fetch('/api/orders');
      const list = await res.json();

      const container = document.getElementById('orders');
      const totalDiv = document.getElementById('totalRevenue');
      container.innerHTML = '';

      let total = 0;

      list.forEach(order => {
        total += order.revenue;

        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `
          <h3>订单编号：${order.id}</h3>
          <p>服务类型：${order.service_type}</p>
          <p>项目名称：${order.product_name}</p>
          <p>金额：￥${order.amount}</p>
          <p>收益：￥${order.revenue}</p>
          <p>创建时间：${order.created_at}</p>
        `;
        container.appendChild(div);
      });

      totalDiv.innerHTML = `<h2>平台总收入：￥${total}</h2>`;
    }

    window.onload = loadOrders;
  </script>

</head>
<body>
<div class="container">
  <nav>
    <a href="index.html">返回盈利中心</a>
  </nav>

  <h1>平台订单与收益统计</h1>
  <div id="totalRevenue">加载中...</div>

  <h2>订单明细</h2>
  <div id="orders">加载中...</div>
</div>
</body>
</html>
